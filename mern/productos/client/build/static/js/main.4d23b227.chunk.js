(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,c){"use strict";c.r(t);var r=c(3),s=c.n(r),n=c(70),a=c.n(n),i=(c(79),c(12)),j=c(144),d=c(14),o=c(5),l=c(136),b=c(137),u=c(44),O=c(138),h=c(15),x=c.n(h),p=c(22),f=c.n(p),m=c(27),g=c(73),v=Object(r.createContext)(),y=c(1),w=function(e){var t=Object(r.useContext)(v);Object(r.useEffect)((function(){x.a.get("/api/products").then((function(t){console.log("RESP",t),e.setProducts(t.data)})).catch((function(e){return f.a.fire("Error getting products","Error getting the products list","error")}))}),[]);return t.socket.on("buy_product_event",(function(t){var c=Object(u.a)(e.products),r=c.findIndex((function(e){return e._id==t._id}));c.splice(r,1,t),e.setProducts(c)})),Object(y.jsx)(l.a,{children:Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(O.a,{children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Name"}),Object(y.jsx)("th",{children:"Price"}),Object(y.jsx)("th",{children:"Type"}),Object(y.jsx)("th",{children:"Brand"}),Object(y.jsx)("th",{children:"Manufacturer"}),Object(y.jsx)("th",{children:"Stock"}),Object(y.jsx)("th",{children:"Ver"}),Object(y.jsx)("th",{children:"Editar"}),Object(y.jsx)("th",{children:"Eliminar"}),Object(y.jsx)("th",{children:"Comprar"})]})}),Object(y.jsx)("tbody",{children:e.products.map((function(c,r){var s,n,a,i;return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:c.name}),Object(y.jsx)("td",{children:c.price}),Object(y.jsx)("td",{children:c.type}),Object(y.jsx)("td",{children:c.brand}),Object(y.jsx)("td",{children:null===(s=c.manufacturer[0])||void 0===s?void 0:s.firstName}),Object(y.jsx)("td",{children:c.stock}),Object(y.jsxs)("td",{children:[Object(y.jsx)(d.b,{to:"/products/view/".concat(c._id),children:Object(y.jsx)(m.a,{})})," "]}),Object(y.jsx)("td",{children:t.user.id==(null===(n=c.manufacturer[0])||void 0===n?void 0:n._id)&&Object(y.jsx)(d.b,{to:"/products/edit/".concat(c._id),children:Object(y.jsx)(m.d,{})})}),Object(y.jsx)("td",{children:t.user.id==(null===(a=c.manufacturer[0])||void 0===a?void 0:a._id)&&Object(y.jsx)("a",{onClick:function(t){return function(t,c){f.a.fire({title:"Delete Prodcuts",text:"Are you sure?",confirmButtonText:"Yes, delete!!",cancelButtonText:"No",showCancelButton:!0,icon:"warning"}).then((function(t){t.value&&x.a.delete("/api/products/"+c._id).then((function(t){var r=e.products.filter((function(e){return e._id!=c._id}));e.setProducts(r),f.a.fire("Product deleted","Products deleted successful","success")})).catch((function(e){return f.a.fire("Product deleted","Products deletion failed","error")}))}))}(0,c)},children:Object(y.jsx)(m.c,{})})}),Object(y.jsx)("td",{children:t.user.id!=(null===(i=c.manufacturer[0])||void 0===i?void 0:i._id)&&Object(y.jsx)("a",{onClick:function(r){return function(c,r){x.a.patch("/api/products/"+r._id).then((function(c){var r=c.data,s=Object(u.a)(e.products),n=s.findIndex((function(e){return e._id==r._id}));s.splice(n,1,r),e.setProducts(s),t.socket.emit("buy_event",r)})).catch((function(e){return f.a.fire("Error buying product","Error buying the product","error")}))}(0,c)},children:Object(y.jsx)(g.a,{})})})]},r)}))})]})})})},P=c(16),S=c(9),C=c(139),N=c(140),k=c(141),_=c(142),E=c(143),q={name:"",price:0,type:"",brand:"",stock:0},R={name:"",price:"",type:"",brand:"",stock:""},T=function(e){var t=Object(r.useState)(q),c=Object(i.a)(t,2),s=c[0],n=c[1],a=Object(r.useState)(R),j=Object(i.a)(a,2),d=j[0],u=j[1],O=Object(o.f)(),h=Object(o.g)().id,p=function(e){var t=e.target,c=t.name,r=t.value;n(Object(S.a)(Object(S.a)({},s),{},Object(P.a)({},c,r)))};Object(r.useEffect)((function(){(e.view||e.edit)&&x.a.get("/api/products/"+h).then((function(e){n(e.data)})).catch((function(e){return console.log(e)}))}),[]);return Object(y.jsx)(C.a,{onSubmit:function(t){t.preventDefault(),e.new?x.a.post("/api/products",s).then((function(e){console.log("RESP",e),O.push("/products/list")})).catch((function(e){for(var t in e.response.data.errors)u(Object(S.a)(Object(S.a)({},d),{},Object(P.a)({},t,e.response.data.errors[t].message)))})):e.edit&&x.a.put("/api/products/"+h,s).then((function(e){console.log("RESP",e),O.push("/products/list")})).catch((function(e){for(var t in e.response.data.errors)u(Object(S.a)(Object(S.a)({},d),{},Object(P.a)({},t,e.response.data.errors[t].message)))}))},children:Object(y.jsxs)(l.a,{children:[Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Name"}),Object(y.jsx)(_.a,{type:"tex",name:"name",value:s.name,onChange:p,required:!0,minLength:2,readOnly:e.view}),d.name&&Object(y.jsx)("span",{style:{color:"red"},children:d.name})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Price"}),Object(y.jsx)(_.a,{type:"number",name:"price",value:s.price,onChange:p,required:!0,readOnly:e.view}),d.price&&Object(y.jsx)("span",{style:{color:"red"},children:d.price})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Type"}),Object(y.jsx)(_.a,{type:"tex",name:"type",value:s.type,onChange:p,required:!0,readOnly:e.view}),d.type&&Object(y.jsx)("span",{style:{color:"red"},children:d.type})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Brand"}),Object(y.jsx)(_.a,{type:"tex",name:"brand",value:s.brand,onChange:p,required:!0,readOnly:e.view}),d.brand&&Object(y.jsx)("span",{style:{color:"red"},children:d.brand})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Stock"}),Object(y.jsx)(_.a,{type:"number",name:"stock",value:s.stock,onChange:p,required:!0,readOnly:e.view}),d.stock&&Object(y.jsx)("span",{style:{color:"red"},children:d.stock})]})}),Object(y.jsxs)(b.a,{xs:12,className:"mt-3",children:[!e.view&&Object(y.jsx)(E.a,{type:"submit",children:"Save"}),Object(y.jsx)(E.a,{style:{marginLeft:"10px"},type:"button",onClick:function(e){O.push("/products/list")},children:"Back"})]})]})})},B=function(){var e,t=Object(r.useContext)(v);return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("h1",{children:["User: ",null===(e=t.user)||void 0===e?void 0:e.firstName]})})},F=function(e){var t=Object(o.h)(),c=t.path,s=t.url,n=Object(r.useState)([]),a=Object(i.a)(n,2),j=a[0],u=a[1];return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(d.a,{children:[Object(y.jsx)(B,{}),Object(y.jsxs)(l.a,{children:[Object(y.jsx)(b.a,{xs:10,children:Object(y.jsx)("h1",{children:"Product Manager"})}),Object(y.jsx)(b.a,{xs:2,children:Object(y.jsx)(d.b,{to:"".concat(s,"/new"),children:Object(y.jsx)(m.b,{})})})]}),Object(y.jsxs)(o.c,{children:[Object(y.jsx)(o.a,{exact:!0,path:"".concat(c,"/list"),children:Object(y.jsx)(w,{products:j,setProducts:u})}),Object(y.jsx)(o.a,{path:"".concat(c,"/new"),children:Object(y.jsx)(T,{new:!0})}),Object(y.jsx)(o.a,{path:"".concat(c,"/edit/:id"),children:Object(y.jsx)(T,{edit:!0})}),Object(y.jsx)(o.a,{path:"".concat(c,"/view/:id"),children:Object(y.jsx)(T,{view:!0})})]})]})})},L={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},D=function(){var e=Object(r.useState)(L),t=Object(i.a)(e,2),c=t[0],s=t[1],n=Object(r.useState)(L),a=Object(i.a)(n,2),j=a[0],d=a[1],u=Object(o.f)(),O=function(e){var t=e.target,r=t.name,n=t.value;s(Object(S.a)(Object(S.a)({},c),{},Object(P.a)({},r,n))),d(Object(S.a)(Object(S.a)({},j),{},Object(P.a)({},r,"")))};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{children:"Register"}),Object(y.jsx)(C.a,{onSubmit:function(e){e.preventDefault(),x.a.post("/api/registry",c).then((function(e){s(L),f.a.fire("User Register","The user was successfully registered","success")})).catch((function(e){for(var t in e.response.data.errors)d(Object(S.a)(Object(S.a)({},j),{},Object(P.a)({},t,e.response.data.errors[t].message)))}))},children:Object(y.jsxs)(l.a,{children:[Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"First Name"}),Object(y.jsx)(_.a,{type:"tex",name:"firstName",value:c.firstName,onChange:O,required:!0}),j.firstName&&Object(y.jsx)("span",{style:{color:"red"},children:j.firstName})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Last Name"}),Object(y.jsx)(_.a,{type:"tex",name:"lastName",value:c.lastName,onChange:O,required:!0}),j.lastName&&Object(y.jsx)("span",{style:{color:"red"},children:j.lastName})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Email"}),Object(y.jsx)(_.a,{type:"email",name:"email",value:c.email,onChange:O,required:!0}),j.email&&Object(y.jsx)("span",{style:{color:"red"},children:j.email})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Password"}),Object(y.jsx)(_.a,{type:"password",name:"password",value:c.password,onChange:O,required:!0}),j.password&&Object(y.jsx)("span",{style:{color:"red"},children:j.password})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Confirm Password"}),Object(y.jsx)(_.a,{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:O,required:!0}),j.confirmPassword&&Object(y.jsx)("span",{style:{color:"red"},children:j.confirmPassword})]})}),Object(y.jsxs)(b.a,{xs:12,className:"mt-3",children:[Object(y.jsx)(E.a,{type:"submit",children:"Register"}),Object(y.jsx)(E.a,{type:"button",onClick:function(e){return u.push("/")},style:{marginLeft:"10px"},children:"Back"})]})]})})]})},A=function(){var e=Object(o.f)(),t=Object(r.useContext)(v),c=Object(r.useState)({email:"",password:""}),s=Object(i.a)(c,2),n=s[0],a=s[1],j=function(e){var t=e.target,c=t.name,r=t.value;a(Object(S.a)(Object(S.a)({},n),{},Object(P.a)({},c,r)))};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{children:"Login"}),Object(y.jsx)(C.a,{onSubmit:function(c){c.preventDefault(),x.a.post("/api/login",n).then((function(c){c.data.success&&(t.setUser(c.data.user),sessionStorage.setItem("USER_DATA",JSON.stringify(c.data.user)),e.push("/products/list"))})).catch((function(e){f.a.fire("Login attempt",e.response.data.message,"error")}))},children:Object(y.jsxs)(l.a,{children:[Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Email"}),Object(y.jsx)(_.a,{type:"email",name:"email",value:n.email,onChange:j,required:!0})]})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(k.a,{children:"Password"}),Object(y.jsx)(_.a,{type:"password",name:"password",value:n.password,onChange:j,required:!0})]})}),Object(y.jsx)(b.a,{xs:12,className:"mt-3",children:Object(y.jsx)(E.a,{type:"submit",children:"Login"})}),Object(y.jsx)(b.a,{xs:12,className:"mt-3",children:Object(y.jsx)(d.b,{to:"/register",children:"Register new user"})})]})})]})},I=c(74),U=c.n(I);var J=function(){var e=Object(r.useState)({}),t=Object(i.a)(e,2),c=t[0],s=t[1],n=Object(r.useState)(U.a.connect("/")),a=Object(i.a)(n,1)[0];return Object(r.useEffect)((function(){if(sessionStorage.getItem("USER_DATA")){var e=JSON.parse(sessionStorage.getItem("USER_DATA"));s(e)}}),[]),Object(y.jsx)(v.Provider,{value:{user:c,setUser:s,socket:a},children:Object(y.jsx)(d.a,{children:Object(y.jsx)(j.a,{children:Object(y.jsxs)(o.c,{children:[Object(y.jsx)(o.a,{exact:!0,path:"/",children:Object(y.jsx)(A,{})}),Object(y.jsx)(o.a,{path:"/register",children:Object(y.jsx)(D,{})}),Object(y.jsx)(o.a,{path:"/products",children:Object(y.jsx)(F,{})})]})})})})},M=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,145)).then((function(t){var c=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,a=t.getTTFB;c(e),r(e),s(e),n(e),a(e)}))};c(134);a.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(J,{})}),document.getElementById("root")),M()},79:function(e,t,c){}},[[135,1,2]]]);
//# sourceMappingURL=main.4d23b227.chunk.js.map